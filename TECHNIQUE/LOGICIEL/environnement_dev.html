
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.uepal.fr/TECHNIQUE/LOGICIEL/environnement_dev.html">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Environnement de dev - Documentation UEPAL Civiparoisse</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#environnement-de-developpement" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Documentation UEPAL Civiparoisse" class="md-header__button md-logo" aria-label="Documentation UEPAL Civiparoisse" data-md-component="logo">
      
  <img src="../../assets/uepal-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation UEPAL Civiparoisse
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Environnement de dev
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Documentation UEPAL Civiparoisse" class="md-nav__button md-logo" aria-label="Documentation UEPAL Civiparoisse" data-md-component="logo">
      
  <img src="../../assets/uepal-logo.svg" alt="logo">

    </a>
    Documentation UEPAL Civiparoisse
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Présentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Présentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Présentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/presentation_fonctionnelle.html" class="md-nav__link">
        Périmètre fonctionnel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/presentation_ecosysteme.html" class="md-nav__link">
        Ecosystème projet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/presentation_livrables.html" class="md-nav__link">
        Livrables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Technique
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Technique" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Technique
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../roles.html" class="md-nav__link">
        Rôles
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Mail
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mail" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Mail
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/mail.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/ecosysteme.html" class="md-nav__link">
        Ecosystème
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/sendmail.html" class="md-nav__link">
        Envoi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/fetchmail.html" class="md-nav__link">
        Réception
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Logiciel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Logiciel" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Logiciel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="distribution_code_composer.html" class="md-nav__link">
        Distribution de code
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Environnement de dev
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="environnement_dev.html" class="md-nav__link md-nav__link--active">
        Environnement de dev
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#principe-de-fonctionnement" class="md-nav__link">
    Principe de fonctionnement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolution-de-noms" class="md-nav__link">
    Résolution de noms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialisation-du-repertoire-de-destination" class="md-nav__link">
    Initialisation du répertoire de destination
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperation-des-dockerfiles" class="md-nav__link">
    Récupération des Dockerfiles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialisation-dune-installation" class="md-nav__link">
    Initialisation d'une installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperation-des-donnees-en-local" class="md-nav__link">
    Récupération des données en local
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchement-des-depots-gits" class="md-nav__link">
    Branchement des dépôts gits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lancement-de-lenvironnement-pour-dev" class="md-nav__link">
    Lancement de l'environnement pour dev
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mots-de-passe-par-defaut" class="md-nav__link">
    Mots de passe par défaut
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-xdebug-pour-vscode-launchjson" class="md-nav__link">
    Configuration xdebug pour vscode : launch.json
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="environnement_dev_env.html" class="md-nav__link">
        Personnalisation environnement de dev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="importation.html" class="md-nav__link">
        Importation de données
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Intégration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Intégration" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Intégration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/index.html" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/etude_authentification.html" class="md-nav__link">
        Authentification
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_3" type="checkbox" id="__nav_3_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4_3">
          Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docker" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_4_3">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/docker.html" class="md-nav__link">
        Description générale
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_3_2" type="checkbox" id="__nav_3_4_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4_3_2">
          Images
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Images" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_4_3_2">
          <span class="md-nav__icon md-icon"></span>
          Images
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/composer_base.html" class="md-nav__link">
        Composer_base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/composer_files.html" class="md-nav__link">
        Composer_files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/tools.html" class="md-nav__link">
        tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/init.html" class="md-nav__link">
        init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/cron.html" class="md-nav__link">
        cron
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/selfkeys.html" class="md-nav__link">
        selfkeys
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/httpd.html" class="md-nav__link">
        httpd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/authenticator.html" class="md-nav__link">
        authenticator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/proxy.html" class="md-nav__link">
        proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/db_tls_server.html" class="md-nav__link">
        db_tls_server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/db_tls_client.html" class="md-nav__link">
        db_tls_client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/update.html" class="md-nav__link">
        update
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/db_ssl.html" class="md-nav__link">
        DB_SSL
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_5" type="checkbox" id="__nav_3_4_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4_5">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_4_5">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/maquettage.html" class="md-nav__link">
        Maquettage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/ressources.html" class="md-nav__link">
        Ressources utiles
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_5_3" type="checkbox" id="__nav_3_4_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4_5_3">
          Chart Helm
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chart Helm" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_4_5_3">
          <span class="md-nav__icon md-icon"></span>
          Chart Helm
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/description_generale.html" class="md-nav__link">
        Description générale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/db_dbproxy.html" class="md-nav__link">
        DB et DB proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/httpd.html" class="md-nav__link">
        Serveur web interne
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/proxy_auth.html" class="md-nav__link">
        Proxy et authenticateur
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/cron.html" class="md-nav__link">
        Cron
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/volumes.html" class="md-nav__link">
        Volumes (persistants)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/secrets.html" class="md-nav__link">
        Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/reservations.html" class="md-nav__link">
        Réservations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#principe-de-fonctionnement" class="md-nav__link">
    Principe de fonctionnement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolution-de-noms" class="md-nav__link">
    Résolution de noms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialisation-du-repertoire-de-destination" class="md-nav__link">
    Initialisation du répertoire de destination
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperation-des-dockerfiles" class="md-nav__link">
    Récupération des Dockerfiles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialisation-dune-installation" class="md-nav__link">
    Initialisation d'une installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperation-des-donnees-en-local" class="md-nav__link">
    Récupération des données en local
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchement-des-depots-gits" class="md-nav__link">
    Branchement des dépôts gits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lancement-de-lenvironnement-pour-dev" class="md-nav__link">
    Lancement de l'environnement pour dev
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mots-de-passe-par-defaut" class="md-nav__link">
    Mots de passe par défaut
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-xdebug-pour-vscode-launchjson" class="md-nav__link">
    Configuration xdebug pour vscode : launch.json
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="environnement-de-developpement">Environnement de développement</h1>
<h2 id="principe-de-fonctionnement">Principe de fonctionnement</h2>
<p>L'idée de l'environnement de développement est de fournir des outils rapides et efficaces pour faire les travaux de développement, sans s'encombrer d'une infrastructure complète.
Cette structure est prévue pour des travaux sur des fonctionnalités internes à Civiparoisse, mais n'est pas suffisante s'il y a besoin de tester des éléments plus importants qui mettent en jeu l'infrastructure (ex : envoi / réception de mail).</p>
<p>Dans le dépot des Dockerfiles, il y a non seulement le nécessaire pour constituer les images, mais également trois docker-compose : </p>
<ul>
<li><code>docker-init.yml</code> : contient un container d'initialisation</li>
<li><code>docker-compose.yml</code> : contient une stack minimale, avec la DB, l'authenticateur, et le proxy et le serveur web</li>
<li><code>docker-compose-bind.yml</code> : contient la même stack, mais avec une variable d'environnement pour faire un montage en bind du répertoire <code>/app</code></li>
</ul>
<p>L'idée est la suivante :</p>
<ul>
<li>initialiser un environnement pour avoir une installation propre</li>
<li>récupérer en local l'ensemble des fichiers de l'environnement</li>
<li>remplacer les emplacements qui contiennent le code spécifique de civiparoisse par des clones git</li>
<li>utiliser la copie pour la faire tourner dans Docker</li>
</ul>
<h2 id="resolution-de-noms">Résolution de noms</h2>
<p>Le nom utilisé dans les images est <code>civicrm.test</code>. Il y a lieu d'écrire une entrée dans <code>/etc/hosts</code> pour résoudre ce nom vers <code>127.0.0.1</code>.</p>
<h2 id="initialisation-du-repertoire-de-destination">Initialisation du répertoire de destination</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nb">echo</span> <span class="s2">&quot;export CIVIPAROISSEDEV=~/devciviparoisse&quot;</span> &gt;&gt;~/.bashrc
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nb">source</span> ~/.bashrc
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>mkdir -p <span class="si">${</span><span class="nv">CIVIPAROISSEDEV</span><span class="si">}</span>
</code></pre></div>
<p>On définit la variable CIVIPAROISSEDEV dans le bashrc de sorte que la variable soit disponible, et chargée via le shell (bash).</p>
<h2 id="recuperation-des-dockerfiles">Récupération des Dockerfiles</h2>
<p>Les dockerfiles se trouvent dans un dépôt spécifique :
<code>git@github.com:UEPAL-CiviParoisse/Dockerfiles.git</code></p>
<p>Il faut compiler les images du Dockerfile (pour l'instant, branche <code>ENV_DEV</code>), via le build.sh présent dans le dépôt.
La compilation des images prend un certain temps (et un temps certain).</p>
<h2 id="initialisation-dune-installation">Initialisation d'une installation</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>docker-compose -f docker-init.yml up
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>docker-compose -f docker-init.yml down --remove-orphans
</code></pre></div>
<p>Ceci initialise surtout les volumes dont on aura besoin</p>
<h2 id="recuperation-des-donnees-en-local">Récupération des données en local</h2>
<p>On lance l'environnement :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker-compose -f docker-compose.yml up -d
</code></pre></div>
<p>Le but est d'avoir le conteneur du serveur web lancé. On utilise <code>docker container ls</code> pour voir la liste des conteneurs lancés. Le nom du conteneur dépendra du répertoire contenant le clone du dépôt des dockerfiles.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker container ls
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>CONTAINER ID   IMAGE                        COMMAND                  CREATED              STATUS              PORTS                            NAMES
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>7d607761b474   uepal_test/proxy             <span class="s2">&quot;apache2-foreground&quot;</span>     About a minute ago   Up About a minute   <span class="m">80</span>/tcp, <span class="m">127</span>.0.0.1:443-&gt;443/tcp   git_dockerfiles_civiproxy_1
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>00d5bf0ad884   uepal_test/authenticator     <span class="s2">&quot;/exec/exec.sh&quot;</span>          About a minute ago   Up About a minute                                    git_dockerfiles_civiauthenticator_1
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>d960762f63b0   uepal_test/httpd             <span class="s2">&quot;apache2-foreground&quot;</span>     About a minute ago   Up About a minute   <span class="m">80</span>/tcp, <span class="m">444</span>/tcp                  git_dockerfiles_civihttpd_1
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>898dca63e562   ubuntu/mysql                 <span class="s2">&quot;docker-entrypoint.s…&quot;</span>   About a minute ago   Up About a minute   <span class="m">3306</span>/tcp, <span class="m">33060</span>/tcp              git_dockerfiles_cividb_1
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>22b88b8c9cde   uepal_test/mkdocs-material   <span class="s2">&quot;mkdocs serve --dev-…&quot;</span>   <span class="m">2</span> hours ago          Up <span class="m">2</span> hours          <span class="m">127</span>.0.0.1:8000-&gt;8000/tcp         mkdocs_material
</code></pre></div>
<p>Ici, le nom du conteneur est : <code>git_dockerfiles_civihttpd_1</code>. </p>
<p>On va récupérer l'ensemble du répertoire /app en local, et on va utiliser des règles ACL pour positionner des droits pour l'utilisateur courant (et ainsi, on aura moins besoin de jongler entre les droits dans le conteneur et l'environnement de travail).
La copie créant de nouveaux fichiers, et comme on va binder les volumes, il faut également positionner les droits sur les fichiers du bind. Dans le conteneur courant, www-data est un utilisateur dont l'UID est 33 (pour le moment, mais ça peut changer en fonction de la vie des images); d'où la mise en place des droits pour l'utilisateur 33.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo docker cp git_dockerfiles_civihttpd_1:/app/ <span class="si">${</span><span class="nv">CIVIPAROISSEDEV</span><span class="si">}</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>sudo setfacl -R -m u:<span class="k">$(</span>whoami<span class="k">)</span>:rwx <span class="si">${</span><span class="nv">CIVIPAROISSEDEV</span><span class="si">}</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>sudo setfacl -R -m u:33:rxw <span class="si">${</span><span class="nv">CIVIPAROISSEDEV</span><span class="si">}</span>
</code></pre></div>
<p>On arrête les conteneurs :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>docker-compose -f docker-compose.yml down
</code></pre></div>
<h2 id="branchement-des-depots-gits">Branchement des dépôts gits</h2>
<p>Les dépôts gits viendront remplacer les fichiers de l'image, via de l'effacement puis des clones.</p>
<table>
<thead>
<tr>
<th>Dépôt</th>
<th>Description</th>
<th>Chemin</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git@github.com:UEPAL-CiviParoisse/Extensions_CiviCRM.git</code></td>
<td>Fichiers extension civiparoisse</td>
<td><code>${CIVIPAROISSEDEV}/app/vendor/uepal/fr.uepalparoisse.civiparoisse</code></td>
</tr>
<tr>
<td><code>git@github.com:UEPAL-CiviParoisse/CIVIP_INSTALL.git</code></td>
<td>Setup civicrm-civiparoisse</td>
<td><code>${CIVIPAROISSEDEV}/app/vendor/uepal/civisetup</code></td>
</tr>
<tr>
<td><code>git@github.com:UEPAL-CiviParoisse/Modules_Drupal.git</code></td>
<td>Module drupal civiparoisse</td>
<td><code>${CIVIPAROISSEDEV}/app/web/modules/contrib/fr.uepalparoisse.druparoisse</code></td>
</tr>
</tbody>
</table>
<p>Lorsqu'on branche les dépôts gits, on va certainement faire :</p>
<ul>
<li>un mv ou rm des fichiers présents en local dans les répertoires cibles, </li>
<li>des <code>git clone</code> pour remplacer les fichiers</li>
<li>des <code>git checkout</code> pour se positionner dans les bonnes branches</li>
<li>des <code>setfacl</code> pour positionner les droits pour le serveur web</li>
</ul>
<p>Lorsqu'on change les branches, il faudra penser à vider les caches (par exemple via les interfaces d'administration).</p>
<h2 id="lancement-de-lenvironnement-pour-dev">Lancement de l'environnement pour dev</h2>
<p>L'environnement pour le développement est un peu particulier, dans la mesure où l'on va utiliser un conteneur httpd modifié pour inclure Xdebug, ainsi qu'un montage bind des fichiers locaux. De même, le réseau utilisé est un seul réseau (en raison de problèmes de mise au point sur les scopes). Pour le lancer : </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker-compose -f docker-compose-bind.yml up -d
</code></pre></div>
<p>Pour arrêter : </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker-compose -f docker-compose-bind.yml down
</code></pre></div>
<h2 id="mots-de-passe-par-defaut">Mots de passe par défaut</h2>
<p>Les mots de passe sont présents dans les secrets liés à l'image <code>init</code>.</p>
<h2 id="configuration-xdebug-pour-vscode-launchjson">Configuration xdebug pour vscode : launch.json</h2>
<p>On ouvre le dossier ${CIVIPAROISSEDEV}/app dans vscode.
Vscode propose une extension pour xdebug : identificateur : <code>xdebug.php-debug</code>.</p>
<p>Cette extension utilise un fichier <code>launch.json</code> pour configurer une instance de xdebug. Il convient de faire attention d'écouter sur toutes les IP et sur le bon port (9003), ainsi que de configurer le pathMapping, pour la correspondance des fichiers sources.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="c1">// Utilisez IntelliSense pour en savoir plus sur les attributs possibles.</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="c1">// Pointez pour afficher la description des attributs existants.</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="c1">// Pour plus d&#39;informations, visitez : https://go.microsoft.com/fwlink/?linkid=830387</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.2.0&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="nt">&quot;configurations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">        </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Listen for Xdebug&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;php&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">            </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;launch&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">            </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">9003</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">            </span><span class="nt">&quot;hostname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;::&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">            </span><span class="nt">&quot;pathMappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">                </span><span class="nt">&quot;/app&quot;</span><span class="p">:</span><span class="s2">&quot;${workspaceFolder}&quot;</span><span class="w"></span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">            </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="p">]</span><span class="w"></span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Une fois que cela est fait, il suffit donc de positionner les points d'arrêts et de lancer le débugger.</p>
<p>A noter que xdebug, tel que configuré, est prévu pour envoyer des requêtes dans tous les cas à l'IDE.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="distribution_code_composer.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Distribution de code" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Distribution de code
            </div>
          </div>
        </a>
      
      
        
        <a href="environnement_dev_env.html" class="md-footer__link md-footer__link--next" aria-label="Next: Personnalisation environnement de dev" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Personnalisation environnement de dev
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "navigation.sections"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>